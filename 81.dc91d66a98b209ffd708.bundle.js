"use strict";(self.webpackChunkancientbeast=self.webpackChunkancientbeast||[]).push([[81],{4081:(e,t,i)=>{i.r(t),i.d(t,{default:()=>u});var r=i(21094),a=i(83355),s=i(69394),n=i(67790),h=i(71956),f=i(18394),c=i(64236);const u=e=>{e.abilities[1]=[{trigger:"onStartPhase",require:function(){return!!this.atLeastOneTarget(this.creature.adjacentHexes(1),{team:a.S.Enemy})},mbuff:0,obuff:0,abilityName:"",getMovementBuff:function(){return this.atLeastOneTarget(this.creature.adjacentHexes(1),{team:a.S.Enemy})?this.isUpgraded()?(this.mbuff=2,this.mbuff):(this.mbuff=1,this.mbuff):(this.mbuff=0,this.mbuff)},getOffenseBuff:function(){return this.atLeastOneTarget(this.creature.adjacentHexes(1),{team:a.S.Enemy})?this.isUpgraded()?(this.obuff=12,this.obuff):(this.obuff=6,this.obuff):(this.obuff=0,this.obuff)},activate:function(){this.creature.replaceEffect(new h.Q("Enemy In Personal Space!",this.creature,this.creature,"",{alterations:{movement:this.getMovementBuff(this.mbuff),offense:this.getOffenseBuff(this.obuff)},stackable:!1,deleteTrigger:"onEndPhase",turnLifetime:1},e))}},{trigger:"onQuery",_targetTeam:a.S.Enemy,require:function(){return!!this.testRequirements()&&!!this.atLeastOneTarget(this.creature.adjacentHexes(1),{team:this._targetTeam})},query:function(){const t=this,i=this.creature;e.grid.queryCreature({fnOnConfirm:function(){t.animation(...arguments)},team:this._targetTeam,id:i.id,flipped:i.player.flipped,hexes:i.adjacentHexes(1)})},activate:function(t){const i=t.health,a=this;a.end(),e.Phaser.camera.shake(.01,150,!0,e.Phaser.camera.SHAKE_HORIZONTAL,!0);const s=new r.h(a.creature,a.damages,1,[],e);t.takeDamage(s),i-t.health>=t.health&&this.isUpgraded()&&t.takeDamage(s)}},{trigger:"onQuery",_targetTeam:a.S.Enemy,require:function(){if(!this.testRequirements())return!1;const t=s.IA,i=s.hi,r=this.creature,a=n.B0(e.grid.getHexMap(r.x,r.y-2,0,!1,t),!0,!0,r.id).concat(n.B0(e.grid.getHexMap(r.x,r.y,0,!1,i),!0,!0,r.id),n.B0(e.grid.getHexMap(r.x,r.y,0,!1,t),!0,!0,r.id),n.B0(e.grid.getHexMap(r.x,r.y-2,0,!0,t),!0,!0,r.id),n.B0(e.grid.getHexMap(r.x,r.y,0,!0,i),!0,!0,r.id),n.B0(e.grid.getHexMap(r.x,r.y,0,!0,t),!0,!0,r.id));return!!this.atLeastOneTarget(a,{team:this._targetTeam})},query:function(){const t=s.IA,i=s.hi,r=this,a=this.creature,h=[e.grid.getHexMap(a.x,a.y-2,0,!1,t),e.grid.getHexMap(a.x,a.y,0,!1,i),e.grid.getHexMap(a.x,a.y,0,!1,t),e.grid.getHexMap(a.x,a.y-2,0,!0,t),e.grid.getHexMap(a.x,a.y,0,!0,i),e.grid.getHexMap(a.x,a.y,0,!0,t)];h.forEach((function(e){n.B0(e,!0,!0,a.id)})),e.grid.queryChoice({fnOnConfirm:function(){r.animation(...arguments)},team:this._targetTeam,requireCreature:1,id:a.id,flipped:a.player.flipped,choices:h})},activate:function(t){const i=this;i.end(),e.Phaser.camera.shake(.01,60,!0,e.Phaser.camera.SHAKE_HORIZONTAL,!0);const a=n.Z$(t).creature;if(this.isUpgraded()){const t=new h.Q("Ground Ball",i.creature,a,"onDamage",{alterations:{meditation:-1}},e);a.addEffect(t),e.log("%CreatureName"+a.id+"%'s meditation is lowered by 1")}const s=new r.h(i.creature,i.damages,1,[],e);a.takeDamage(s)}},{trigger:"onQuery",_energyNormal:30,_energySelfUpgraded:10,require:function(){return this.isUpgraded()?(this.requirements={energy:this._energySelfUpgraded},this.costs={energy:this._energySelfUpgraded}):(this.requirements={energy:this._energyNormal},this.costs={energy:this._energyNormal}),this.testRequirements()},query:function(){const t=this,i=this.creature;let r=[];this.isUpgraded()&&this.creature.energy<this._energyNormal||(r=e.grid.getFlyingRange(i.x,i.y,50,1,0)),r.push(e.grid.hexes[i.y][i.x]),e.grid.queryHexes({fnOnCancel:function(){e.activeCreature.queryMove()},fnOnConfirm:function(){t.animation(...arguments)},hexes:r,hideNonTarget:!0})},activate:function(t){const i=this,r=this.creature,a=t.x===r.x&&t.y===r.y;this.isUpgraded()&&a?(this.requirements={energy:this._energySelfUpgraded},this.costs={energy:this._energySelfUpgraded}):(this.requirements={energy:this._energyNormal},this.costs={energy:this._energyNormal}),i.end();const s=[new h.Q("Slow Down",i.creature,t,"onStepIn",{requireFn:function(){return!!this.trap.hex.creature&&"A1"!=this.trap.hex.creature.type},effectFn:function(e,t){t instanceof f.j&&t.remainingMove--}},e)];new c.U(t.x,t.y,"mud-bath",s,i.creature.player,{},e),e.soundsys.playSFX("sounds/mudbath"),a&&e.onCreatureMove(r,t)}}]}},71956:(e,t,i)=>{i.d(t,{Q:()=>a});var r=i(18394);class a{constructor(e,t,i,r,a,s){this.effectFn=()=>{},this.requireFn=e=>!0,this.alterations={},this.turnLifetime=0,this.deleteTrigger="onStartOfRound",this.stackable=!0,this.specialHint=void 0,this.deleteOnOwnerDeath=!1,this._trap=void 0,this.attacker=void 0,this.id=s.effectId++,this.game=s,this.name=e,this.owner=t,this.target=i,this.trigger=r,this.creationTurn=s.turn;for(const e of Object.keys(a))e in this&&(this[e]=a[e]);s.effects.push(this)}animation(...e){e?this.activate(...e):this.activate()}activate(e){if(!this.requireFn(e))return!1;e instanceof r.j&&e.addEffect(this),this.effectFn(this,e)}deleteEffect(){if("effects"in this.target){const e=this.target.effects.indexOf(this);this.target.effects[e]?this.target.effects.splice(e,1):console.warn("Failed to find effect on target.",this)}const e=this.game.effects.indexOf(this);this.game.effects[e]?this.game.effects.splice(e,1):console.warn("Failed to find effect on game.",this),"updateAlteration"in this.target&&this.target.updateAlteration()}get trap(){return this._trap}set trap(e){this._trap=e}}}}]);