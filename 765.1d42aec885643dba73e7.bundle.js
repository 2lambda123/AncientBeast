"use strict";(self.webpackChunkancientbeast=self.webpackChunkancientbeast||[]).push([[765],{99765:(e,t,r)=>{r.r(t),r.d(t,{default:()=>l});var a=r(4942),i=r(42982),n=r(21094),s=r(83355),c=r(18394),u=r(71956),o=r(67790);function f(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function h(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?f(Object(r),!0).forEach((function(t){(0,a.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):f(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}const l=function(e){e.abilities[7]=[{trigger:"onOtherDamage",require:function(e){return!!this.testRequirements()&&(void 0===e&&(e={type:"target"}),!0)},activate:function(t,r){this.creature.id===t.attacker.id&&(r.addEffect(new u.Q("Burning Spirit",this.creature,r,"",{alterations:{burn:-1}},e)),r.stats.burn-=1,this.isUpgraded()&&this.creature.addEffect(new u.Q("Burning Heart",this.creature,this.creature,"",{alterations:{burn:1}},e)))}},{trigger:"onQuery",_targetTeam:s.S.Enemy,require:function(){return!!this.testRequirements()&&!!this.testDirection({team:this._targetTeam,distance:this._getDistance(),sourceCreature:this.creature})},query:function(){var t=this,r=this.creature;e.grid.queryDirection({fnOnConfirm:function(){t.animation.apply(t,arguments)},flipped:r.player.flipped,team:this._targetTeam,id:this.creature.id,requireCreature:!0,x:r.x,y:r.y,distance:this._getDistance(),distanceFalloff:this.range.regular,sourceCreature:r})},activate:function(t,r){var a=o.Z$(t).creature;this.end(),e.Phaser.camera.shake(.01,100,!0,e.Phaser.camera.SHAKE_HORIZONTAL,!0);var i=this.creature.sprite.scale.x>0?232:52,n=e.animations.projectile(this,a,"effects_fiery-touch",t,r,i,-20),s=n[0],c=n[1],u=this._getDamage(t);s.onComplete.add((function(){this.destroy(),a.takeDamage(u)}),c)},getAnimationData:function(){return{duration:425}},_getDistance:function(){return this.isUpgraded()?this.range.upgraded:this.range.regular},_getDamage:function(t){var r=o.B0((0,i.Z)(t),!1,!1).length,a=h(h({},this.damages),{},{slash:r>=this.range.regular?0:this.damages.slash});return new n.h(this.creature,a,1,[],e)}},{trigger:"onQuery",range:6,require:function(){return this.testRequirements()},query:function(){var t=this,r=this.creature;r.queryMove({noPath:!0,isAbility:!0,range:e.grid.getFlyingRange(r.x,r.y,this.range,r.size,r.id),callback:function(e,r){e.x!=r.creature.x||e.y!=r.creature.y?(delete arguments[1],t.animation.apply(t,arguments)):t.query()}})},activate:function(t){var r=this;r.end(),this.isUpgraded()&&(this.range+=1),r.getTargets(r.creature.adjacentHexes(1)).forEach((function(e){e.target,c.j}));var a=function(t,a){var i=a;a instanceof c.j||(i=a.creature),i.takeDamage(new n.h(t.attacker,r.damages,1,[],e),{isFromTrap:!0}),this.trap.destroy(),t.deleteEffect()},i=function(){var e=this.trap.hex.creature,t=e&&e.type||null;return 0!==e&&t!==r.creature.type},s=this.creature;s.hexagons.forEach((function(t){t.createTrap("firewall",[new u.Q("Firewall",s,t,"onStepIn",{requireFn:i,effectFn:a,attacker:s},e)],s.player,{turnLifetime:1,ownerCreature:s,fullTurnLifetime:!0})})),r.creature.moveTo(t,{ignoreMovementPoint:!0,ignorePath:!0,animation:"teleport",callback:function(){e.activeCreature.queryMove()}})}},{trigger:"onQuery",require:function(){return this.testRequirements()},query:function(){var t=this,r=this.creature.adjacentHexes(1);e.grid.queryHexes({fnOnConfirm:function(){t.animation.apply(t,arguments)},fnOnSelect:function(t){r.forEach((function(t){t.cleanOverlayVisualState(),t.overlayVisualState("creature selected player"+e.activeCreature.team)})),t.cleanOverlayVisualState(),t.overlayVisualState("creature selected player"+e.activeCreature.team)},id:this.creature.id,hexes:r,hideNonTarget:!0})},activate:function(){var t=this;t.end();var r=this.creature.adjacentHexes(1),a=t.getTargets(r);this.isUpgraded()&&(this.damages.burn=30),a.forEach((function(r){r.target.takeDamage(new n.h(t.creature,t.damages,1,[],e))}))}}]}},71956:(e,t,r)=>{r.d(t,{Q:()=>i});var a=r(18394);class i{constructor(e,t,r,a,i,n){this.effectFn=()=>{},this.requireFn=e=>!0,this.alterations={},this.turnLifetime=0,this.deleteTrigger="onStartOfRound",this.stackable=!0,this.specialHint=void 0,this.deleteOnOwnerDeath=!1,this._trap=void 0,this.attacker=void 0,this.id=n.effectId++,this.game=n,this.name=e,this.owner=t,this.target=r,this.trigger=a,this.creationTurn=n.turn;for(const e of Object.keys(i))e in this&&(this[e]=i[e]);n.effects.push(this)}animation(...e){e?this.activate(...e):this.activate()}activate(e){if(!this.requireFn(e))return!1;e instanceof a.j&&e.addEffect(this),this.effectFn(this,e)}deleteEffect(){if("effects"in this.target){const e=this.target.effects.indexOf(this);this.target.effects[e]?this.target.effects.splice(e,1):console.warn("Failed to find effect on target.",this)}const e=this.game.effects.indexOf(this);this.game.effects[e]?this.game.effects.splice(e,1):console.warn("Failed to find effect on game.",this),"updateAlteration"in this.target&&this.target.updateAlteration()}get trap(){return this._trap}set trap(e){this._trap=e}}},30907:(e,t,r)=>{function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,a=new Array(t);r<t;r++)a[r]=e[r];return a}r.d(t,{Z:()=>a})},4942:(e,t,r)=>{r.d(t,{Z:()=>i});var a=r(72881);function i(e,t,r){return(t=(0,a.Z)(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}},42982:(e,t,r)=>{r.d(t,{Z:()=>n});var a=r(30907),i=r(40181);function n(e){return function(e){if(Array.isArray(e))return(0,a.Z)(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||(0,i.Z)(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}},40181:(e,t,r)=>{r.d(t,{Z:()=>i});var a=r(30907);function i(e,t){if(e){if("string"==typeof e)return(0,a.Z)(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?(0,a.Z)(e,t):void 0}}}}]);