"use strict";(self.webpackChunkancientbeast=self.webpackChunkancientbeast||[]).push([[85],{55085:(e,t,a)=>{a.r(t),a.d(t,{default:()=>c});var r=a(19755),i=a(16255),s=a(83355),n=a(67790),u=a(65482);const c=function(e){e.abilities[0]=[{trigger:"onUnderAttack",require:function(){return this.creature.protectedFromFatigue=this.testRequirements(),this.creature.protectedFromFatigue},activate:function(t){if(e.activeCreature.id==this.creature.id)return t;if(this.isUpgraded()&&t.melee&&!t.counter){var a=new i.h(this.creature,{pure:9},1,[],e);a.counter=!0,e.activeCreature.takeDamage(a),e.Phaser.camera.shake(.03,220,!0,e.Phaser.camera.SHAKE_HORIZONTAL,!0)}return this.creature.player.plasma-=1,this.creature.protectedFromFatigue=this.testRequirements(),t.damages={total:0},t.status="Shielded",t.effect=[],t.noLog=!0,this.end(!0),e.log("%CreatureName"+this.creature.id+"% is protected by Plasma Field"),t}},{trigger:"onQuery",_targetTeam:s.S.Enemy,require:function(){return!!this.testRequirements()&&!!this.atLeastOneTarget(this.creature.adjacentHexes(this.isUpgraded()?4:1),{team:this._targetTeam})},query:function(){var t=this,a=this.creature;e.grid.queryCreature({fnOnConfirm:function(){t.animation.apply(t,arguments)},team:this._targetTeam,id:a.id,flipped:a.player.flipped,hexes:a.adjacentHexes(this.isUpgraded()?4:1)})},activate:function(t){this.end(),e.Phaser.camera.shake(.02,200,!0,e.Phaser.camera.SHAKE_HORIZONTAL,!0);var a={shock:12*t.size},r=new i.h(this.creature,a,1,[],e);t.takeDamage(r)}},{trigger:"onQuery",_targetTeam:s.S.Enemy,require:function(){if(!this.testRequirements())return!1;var t=this.creature.adjacentHexes(2);if(!this.atLeastOneTarget(t,{team:this._targetTeam}))return!1;var a=99;return this.getTargets(t).forEach((function(e){e.target instanceof u.j&&a>e.target.size&&(a=e.target.size)})),!(this.creature.player.plasma<a&&(this.message=e.msg.abilities.noPlasma,1))},query:function(){var t=this,a=this.creature;e.grid.queryCreature({fnOnConfirm:function(){t.animation.apply(t,arguments)},optTest:function(e){return e.size<=a.player.plasma},team:this._targetTeam,id:a.id,flipped:a.player.flipped,hexes:a.adjacentHexes(2)})},activate:function(t){var a=this;a.end(),e.Phaser.camera.shake(.04,111,!0,e.Phaser.camera.SHAKE_HORIZONTAL,!0);var r=t.size,s=t.baseStats.health-t.health;this.isUpgraded()&&s<40&&(s=40),a.creature.player.plasma-=r,s=new i.h(a.creature,{pure:s},1,[],e),a.end(),t.takeDamage(s)}},{trigger:"onQuery",require:function(){return!!this.testRequirements()&&(this.creature.player.plasma<=1?(this.message=e.msg.abilities.noPlasma,!1):this.creature.player.getNbrOfCreatures()!=e.creaLimitNbr||(this.message=e.msg.abilities.noPsy,!1))},summonRange:4,query:function(){this.isUpgraded()&&(this.summonRange=6),e.UI.materializeToggled=!0,e.UI.toggleDash("randomize")},fnOnSelect:function(t,a){var r=e.retrieveCreatureStats(a.creature);e.grid.previewCreature(t.pos,r,this.creature.player)},materialize:function(t){var a=e.retrieveCreatureStats(t),i=this,s=this.creature,c=s.player.summonCreaturesWithMaterializationSickness;e.queue.removeTempCreature(),a=r.extend(a,{x:3,y:3},{team:this.creature.player.id},{temp:!0},{materializationSickness:c});var h=new u.j(a,e);h.cleanHex(),h.sprite.alpha=0,e.queue.tempCreature=h,e.queue.addByInitiative(h,!c),e.updateQueueDisplay(),r("div[creatureid='"+h.id+"']").css({opacity:.5}),e.grid.forEachHex((function(e){e.unsetReachable()}));var o=s.hexagons[0].adjacentHex(this.summonRange);o.forEach((function(e){e.setReachable()})),o=o.filter((function(e){return e.isWalkable(a.size,0,!1)})),o=n.kh(o,a.size,e.grid),e.grid.queryHexes({fnOnSelect:function(){i.fnOnSelect.apply(i,arguments)},fnOnCancel:function(){e.activeCreature.queryMove()},fnOnConfirm:function(){i.animation.apply(i,arguments)},args:{creature:t,cost:a.size-0+(a.level-0)},size:a.size,flipped:s.player.flipped,hexes:o})},activate:function(t,a){var r=a.creature,i=this,s={x:t.x,y:t.y};i.creature.player.plasma-=a.cost,i.end(!1,!0),i.creature.player.summon(r,s);var n=e.creatures.pop();n.id--,e.creatures[n.id]=n,e.creatureIdCounter--,i.creature.queryMove()}}]}}}]);