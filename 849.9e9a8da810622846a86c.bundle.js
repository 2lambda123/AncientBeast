"use strict";(self.webpackChunkancientbeast=self.webpackChunkancientbeast||[]).push([[849],{17849:(e,t,a)=>{a.r(t),a.d(t,{default:()=>c});var i=a(16255),r=a(83355),n=a(23315),s=(a(67790),a(18394),a(68861));a(56865);const c=function(e){e.abilities[39]=[{trigger:"onStartPhase onEndPhase",_targetTeam:r.S.Enemy,require:function(){return this.creature===this.game.activeCreature&&!this.creature.materializationSickness&&!!this.atLeastOneTarget(this._getHexes(),{team:this._targetTeam})&&this.testRequirements()},activate:function(){this.end();var t=this._getHexes()[0].creature;this.isUpgraded()&&t.addFatigue(t.endurance);var a=new s.Q(this.title,this.creature,t,"",{stackable:!0,alterations:{endurance:-5}},e);t.isFragile()?e.log("%CreatureName".concat(t.id,"% is already fragile")):t.endurance<5&&t.endurance>0?t.addEffect(a,"%CreatureName".concat(t.id,"% loses -").concat(t.endurance," endurance")):t.addEffect(a,"%CreatureName".concat(t.id,"% loses -5 endurance")),this.game.UI.updateFatigue()},_getHexes:function(){return this.creature.getHexMap(n.nX)}},{trigger:"onQuery",_targetTeam:r.S.Enemy,require:function(){var e=this.creature;return!!this.testRequirements()&&!!this.atLeastOneTarget(e.getHexMap(n.y7),{team:this._targetTeam})},query:function(){var t=this,a=this.creature;e.grid.queryCreature({fnOnConfirm:function(){t.animation.apply(t,arguments)},team:this._targetTeam,id:a.id,flipped:a.flipped,hexes:a.getHexMap(n.y7)})},activate:function(t){this.end(),e.Phaser.camera.shake(.01,90,!0,e.Phaser.camera.SHAKE_HORIZONTAL,!0);var a={pierce:11};if(a.pierce=t.endurance<=0?2*a.pierce:a.pierce,this.isUpgraded()){var r=this.creature.stats.endurance-t.stats.endurance;r>0&&(a.pierce+=r)}var n=new i.h(this.creature,a,1,[],e);t.takeDamage(n)}},{trigger:"onQuery",_targetTeam:r.S.Both,_directions:[0,1,0,0,1,0],require:function(){var t=this.creature;return!!this.testRequirements()&&(t.stats.moveable?!!this.testDirection({team:this._targetTeam,sourceCreature:t,flipped:t.player.flipped,directions:this._directions,distance:this._getMaxDistance(),minDistance:this.range.minimum,optTest:function(e){return e.stats.moveable}}):(this.message=e.msg.abilities.notMoveable,!1))},query:function(){var t=this,a=this.creature;e.grid.queryDirection({fnOnConfirm:function(){t.animation.apply(t,arguments)},team:this._targetTeam,id:a.id,sourceCreature:a,flipped:a.player.flipped,x:a.x,y:a.y,directions:this._directions,distance:this._getMaxDistance(),minDistance:this.range.minimum,optTest:function(e){return e.stats.moveable}})},activate:function(t){var a=this.creature;t=t.find((function(e){return e.creature})).creature,this.end();var i,r=null,n=null,s=a.x<t.x;if(1===t.size)n=s?a.x+1:a.x-2;else if(2===t.size){var c=Math.floor((a.x+t.x)/2);a.x<t.x&&(a.x+t.x)%2==1&&c++,r=s?c-1:c+1,Math.abs(a.x-t.x)>1&&(n=s?c+1:c-1)}else r=s?t.x-3:t.x+2;r&&(i=e.grid.hexes[a.y][r],a.moveTo(i,{ignoreMovementPoint:!0,ignorePath:!0,callback:function(){var t=setInterval((function(){e.freezedInput||(clearInterval(t),e.activeCreature.queryMove(),a.facePlayerDefault())}),100)}})),n&&(i=e.grid.hexes[a.y][n],t.moveTo(i,{ignoreMovementPoint:!0,ignorePath:!0,callback:function(){var t=setInterval((function(){e.freezedInput||(clearInterval(t),e.activeCreature.queryMove(),a.facePlayerDefault())}),100)}}))},_getMaxDistance:function(){return this.isUpgraded()?this.range.upgraded:this.range.regular}},{trigger:"onQuery",damages:{slash:10,crush:5},_getHexes:function(){return this.isUpgraded()?n.xB:n.Hv},require:function(){return!!this.testRequirements()},query:function(){var t=this,a=this.creature,i=this._getHexes();e.grid.queryChoice({fnOnConfirm:function(){t.animation.apply(t,arguments)},team:r.S.Both,requireCreature:0,id:a.id,flipped:a.player.flipped,choices:[a.getHexMap(i),a.getHexMap(i,!0)]})},activate:function(t){var a={slash:10},i=this;i.end(),e.Phaser.camera.shake(.02,100,!0,e.Phaser.camera.SHAKE_HORIZONTAL,!0),i.areaDamage(i.creature,a,[],i.getTargets(t),!0),i.areaDamage(i.creature,a,[],i.getTargets(t))}}]}},68861:(e,t,a)=>{a.d(t,{Q:()=>c});var i=a(15671),r=a(43144),n=a(19755),s=a(18394),c=function(){function e(t,a,r,s,c,u){(0,i.Z)(this,e),this.id=u.effectId++,this.game=u,this.name=t,this.owner=a,this.target=r,this.trigger=s,this.creationTurn=u.turn;var o=n.extend({requireFn:function(){return!0},effectFn:function(){},alterations:{},turnLifetime:0,deleteTrigger:"onStartOfRound",stackable:!0,noLog:!1,specialHint:void 0,deleteOnOwnerDeath:!1},c);n.extend(this,o),u.effects.push(this)}return(0,r.Z)(e,[{key:"animation",value:function(){this.activate.apply(this,arguments)}},{key:"activate",value:function(e){if(!this.requireFn(e))return!1;this.noLog||console.log("Effect "+this.name+" triggered"),e instanceof s.j&&e.addEffect(this),this.effectFn(this,e)}},{key:"deleteEffect",value:function(){var e=this.target.effects.indexOf(this);this.target.effects[e]?this.target.effects.splice(e,1):console.warn("Failed to find effect on target.",this);var t=this.game.effects.indexOf(this);this.game.effects[t]?this.game.effects.splice(t,1):console.warn("Failed to find effect on game.",this),this.target.updateAlteration()}}]),e}()}}]);