(window.webpackJsonp=window.webpackJsonp||[]).push([[12],{325:function(e,t,r){"use strict";r.r(t);var i=r(0),a=r(114),n=r(28),s=r(45),u=r(11),o=r(987);t.default=function(e){e.abilities[37]=[{trigger:"onCreatureMove",require:function(t){return!!this.testRequirements()&&(null==t&&(t=this.creature.hexagons[0]),this.message="",t.trap&&"mud-bath"==t.trap.type?(e.UI.abilitiesButtons[0].changeState("noclick"),!0):(this.message="Not in a mud bath.",this.creature.effects.forEach((function(e){"mud-bath"==e.trigger&&e.deleteEffect()})),!1))},activate:function(){var t=i.extend({},this.effects[0]);if(this.isUpgraded())for(var r in t)({}).hasOwnProperty.call(t,r)&&(t[r]=2*t[r]);var a=new o.a("Spa Goggles",this.creature,this.creature,"mud-bath",{alterations:t},e);this.creature.addEffect(a);var n,s="%CreatureName"+this.creature.id+"%'s ",u=!0;for(var g in t)({}).hasOwnProperty.call(t,g)&&(u||(s+="and "),s+=g+" ",u=!1,n=t[g]);s+="+"+n,e.log(s)}},{trigger:"onQuery",_targetTeam:n.a.enemy,require:function(){return!!this.testRequirements()&&!!this.atLeastOneTarget(this.creature.adjacentHexes(1),{team:this._targetTeam})},query:function(){var t=this,r=this.creature;e.grid.queryDirection({fnOnConfirm:function(){t.animation.apply(t,arguments)},flipped:r.player.flipped,team:this._targetTeam,id:r.id,requireCreature:!0,x:r.x,y:r.y,sourceCreature:r,stopOnCreature:!1,distance:1})},activate:function(t,r){this.end();var i=u.d(t).creature,n=new a.a(this.creature,this.damages,1,[],e);if(!i.takeDamage(n).kill){var s=e.grid.getHexLine(i.x,i.y,r.direction,i.flipped);s.splice(0,1);for(var o=null,g=0;g<s.length&&s[g].isWalkable(i.size,i.id,!0)&&(o=s[g],this.isUpgraded());g++){for(var c=!0,h=0;h<i.size;h++){var d=e.grid.hexes[o.y][o.x-h];if(!d.trap||"mud-bath"!==d.trap.type){c=!1;break}}if(!c)break}null!==o&&i.moveTo(o,{callback:function(){e.activeCreature.queryMove()},ignoreMovementPoint:!0,ignorePath:!0,overrideSpeed:1200,animation:"push"})}}},{trigger:"onQuery",_targetTeam:n.a.enemy,require:function(){if(!this.testRequirements())return!1;var t=s.d,r=s.q,i=this.creature,a=u.b(e.grid.getHexMap(i.x,i.y-2,0,!1,t),!0,!0,i.id,i.team).concat(u.b(e.grid.getHexMap(i.x,i.y,0,!1,r),!0,!0,i.id,i.team),u.b(e.grid.getHexMap(i.x,i.y,0,!1,t),!0,!0,i.id,i.team),u.b(e.grid.getHexMap(i.x,i.y-2,0,!0,t),!0,!0,i.id,i.team),u.b(e.grid.getHexMap(i.x,i.y,0,!0,r),!0,!0,i.id,i.team),u.b(e.grid.getHexMap(i.x,i.y,0,!0,t),!0,!0,i.id,i.team));return!!this.atLeastOneTarget(a,{team:this._targetTeam})},query:function(){var t=s.d,r=s.q,i=this,a=this.creature,n=[e.grid.getHexMap(a.x,a.y-2,0,!1,t),e.grid.getHexMap(a.x,a.y,0,!1,r),e.grid.getHexMap(a.x,a.y,0,!1,t),e.grid.getHexMap(a.x,a.y-2,0,!0,t),e.grid.getHexMap(a.x,a.y,0,!0,r),e.grid.getHexMap(a.x,a.y,0,!0,t)];n.forEach((function(e){u.b(e,!0,!0,a.id)})),e.grid.queryChoice({fnOnConfirm:function(){i.animation.apply(i,arguments)},team:this._targetTeam,requireCreature:1,id:a.id,flipped:a.flipped,choices:n})},activate:function(t){this.end();var r=u.d(t).creature;if(this.isUpgraded()){var i=new o.a("Ground Ball",this.creature,r,"onDamage",{alterations:{meditation:-1}},e);r.addEffect(i),e.log("%CreatureName"+r.id+"%'s meditation is lowered by 1")}var n=new a.a(this.creature,this.damages,1,[],e);r.takeDamage(n)}},{trigger:"onQuery",_energyNormal:30,_energySelfUpgraded:10,require:function(){return this.isUpgraded()?(this.requirements={energy:this._energySelfUpgraded},this.costs={energy:this._energySelfUpgraded}):(this.requirements={energy:this._energyNormal},this.costs={energy:this._energyNormal}),this.testRequirements()},query:function(){var t=this,r=this.creature,i=[];this.isUpgraded()&&this.creature.energy<this._energyNormal||(i=e.grid.getFlyingRange(r.x,r.y,50,1,0)),i.push(e.grid.hexes[r.y][r.x]),e.grid.hideCreatureHexes(this.creature),e.grid.queryHexes({fnOnCancel:function(){e.activeCreature.queryMove(),e.grid.clearHexViewAlterations()},fnOnConfirm:function(){t.animation.apply(t,arguments)},hexes:i,hideNonTarget:!0})},activate:function(t){e.grid.clearHexViewAlterations();var r=this.creature,i=t.x===r.x&&t.y===r.y;this.isUpgraded()&&i?(this.requirements={energy:this._energySelfUpgraded},this.costs={energy:this._energySelfUpgraded}):(this.requirements={energy:this._energyNormal},this.costs={energy:this._energyNormal}),this.end();var a=[new o.a("Slow Down",this.creature,t,"onStepIn",{requireFn:function(){return!!this.trap.hex.creature&&"A1"!=this.trap.hex.creature.type},effectFn:function(e,t){t.remainingMove--}},e)];t.createTrap("mud-bath",a,this.creature.player),i&&e.onCreatureMove(r,t)}}]}},987:function(e,t,r){"use strict";r.d(t,"a",(function(){return g}));var i=r(3),a=r.n(i),n=r(4),s=r.n(n),u=r(0),o=r(5),g=function(){function e(t,r,i,n,s,o){a()(this,e),this.id=o.effectId++,this.game=o,this.name=t,this.owner=r,this.target=i,this.trigger=n,this.creationTurn=o.turn;var g=u.extend({requireFn:function(){return!0},effectFn:function(){},alterations:{},turnLifetime:0,deleteTrigger:"onStartOfRound",stackable:!0,noLog:!1,specialHint:void 0,deleteOnOwnerDeath:!1},s);u.extend(this,g),o.effects.push(this)}return s()(e,[{key:"animation",value:function(){this.activate.apply(this,arguments)}},{key:"activate",value:function(e){if(!this.requireFn(e))return!1;this.noLog||console.log("Effect "+this.name+" triggered"),e instanceof o.a&&e.addEffect(this),this.effectFn(this,e)}},{key:"deleteEffect",value:function(){var e=this.target.effects.indexOf(this);this.target.effects[e]?this.target.effects.splice(e,1):console.warn("Failed to find effect on target.",this);var t=this.game.effects.indexOf(this);this.game.effects[t]?this.game.effects.splice(t,1):console.warn("Failed to find effect on game.",this),this.target.updateAlteration()}}]),e}()}}]);