"use strict";(self.webpackChunkancientbeast=self.webpackChunkancientbeast||[]).push([[644],{36644:(e,t,i)=>{i.r(t),i.d(t,{default:()=>f}),i(19755);var a=i(16255),r=i(83355),n=i(23315),s=i(67790),h=i(68861);const f=function(e){e.abilities[1]=[{trigger:"onStartPhase",require:function(){return!!this.testRequirements()},mbuff:0,obuff:0,abilityName:"",getAbilityName:function(e){return this.atLeastOneTarget(this.creature.adjacentHexes(1),{team:r.S.Enemy})?(this.abilityName="Enemy In Personal Space!",this.abilityName):(this.abilityName="No One In Personal Space",this.abilityName)},getMovementBuff:function(e){return this.atLeastOneTarget(this.creature.adjacentHexes(1),{team:r.S.Enemy})?this.isUpgraded()?(this.mbuff=2,this.mbuff):(this.mbuff=1,this.mbuff):(this.mbuff=0,this.mbuff)},getOffenseBuff:function(e){return this.atLeastOneTarget(this.creature.adjacentHexes(1),{team:r.S.Enemy})?this.isUpgraded()?(this.obuff=12,this.obuff):(this.obuff=6,this.obuff):(this.obuff=0,this.obuff)},activate:function(){this.creature.replaceEffect(new h.Q(this.getAbilityName(this.abilityName),this.creature,this.creature,"",{alterations:{movement:this.getMovementBuff(this.mbuff),offense:this.getOffenseBuff(this.obuff)},stackable:!1,deleteTrigger:"onEndPhase",turnLifetime:1},e))}},{trigger:"onQuery",_targetTeam:r.S.Enemy,require:function(){return!!this.testRequirements()&&!!this.atLeastOneTarget(this.creature.adjacentHexes(1),{team:this._targetTeam})},query:function(){var t=this,i=this.creature;e.grid.queryCreature({fnOnConfirm:function(){t.animation.apply(t,arguments)},team:this._targetTeam,id:i.id,flipped:i.player.flipped,hexes:i.adjacentHexes(1)})},activate:function(t){var i=t.health,r=this;r.end(),e.Phaser.camera.shake(.01,150,!0,e.Phaser.camera.SHAKE_HORIZONTAL,!0);var n=new a.h(r.creature,r.damages,1,[],e);t.takeDamage(n),i-t.health>=t.health&&this.isUpgraded()&&t.takeDamage(n)}},{trigger:"onQuery",_targetTeam:r.S.Enemy,require:function(){if(!this.testRequirements())return!1;var t=n.IA,i=n.hi,a=this.creature,r=s.B0(e.grid.getHexMap(a.x,a.y-2,0,!1,t),!0,!0,a.id,a.team).concat(s.B0(e.grid.getHexMap(a.x,a.y,0,!1,i),!0,!0,a.id,a.team),s.B0(e.grid.getHexMap(a.x,a.y,0,!1,t),!0,!0,a.id,a.team),s.B0(e.grid.getHexMap(a.x,a.y-2,0,!0,t),!0,!0,a.id,a.team),s.B0(e.grid.getHexMap(a.x,a.y,0,!0,i),!0,!0,a.id,a.team),s.B0(e.grid.getHexMap(a.x,a.y,0,!0,t),!0,!0,a.id,a.team));return!!this.atLeastOneTarget(r,{team:this._targetTeam})},query:function(){var t=n.IA,i=n.hi,a=this,r=this.creature,h=[e.grid.getHexMap(r.x,r.y-2,0,!1,t),e.grid.getHexMap(r.x,r.y,0,!1,i),e.grid.getHexMap(r.x,r.y,0,!1,t),e.grid.getHexMap(r.x,r.y-2,0,!0,t),e.grid.getHexMap(r.x,r.y,0,!0,i),e.grid.getHexMap(r.x,r.y,0,!0,t)];h.forEach((function(e){s.B0(e,!0,!0,r.id)})),e.grid.queryChoice({fnOnConfirm:function(){a.animation.apply(a,arguments)},team:this._targetTeam,requireCreature:1,id:r.id,flipped:r.flipped,choices:h})},activate:function(t){var i=this;i.end(),e.Phaser.camera.shake(.01,60,!0,e.Phaser.camera.SHAKE_HORIZONTAL,!0);var r=s.Z$(t).creature;if(this.isUpgraded()){var n=new h.Q("Ground Ball",i.creature,r,"onDamage",{alterations:{meditation:-1}},e);r.addEffect(n),e.log("%CreatureName"+r.id+"%'s meditation is lowered by 1")}var f=new a.h(i.creature,i.damages,1,[],e);r.takeDamage(f)}},{trigger:"onQuery",_energyNormal:30,_energySelfUpgraded:10,require:function(){return this.isUpgraded()?(this.requirements={energy:this._energySelfUpgraded},this.costs={energy:this._energySelfUpgraded}):(this.requirements={energy:this._energyNormal},this.costs={energy:this._energyNormal}),this.testRequirements()},query:function(){var t=this,i=this.creature,a=[];this.isUpgraded()&&this.creature.energy<this._energyNormal||(a=e.grid.getFlyingRange(i.x,i.y,50,1,0)),a.push(e.grid.hexes[i.y][i.x]),e.grid.queryHexes({fnOnCancel:function(){e.activeCreature.queryMove()},fnOnConfirm:function(){t.animation.apply(t,arguments)},hexes:a,hideNonTarget:!0})},activate:function(t){var i=this,a=this.creature,r=t.x===a.x&&t.y===a.y;this.isUpgraded()&&r?(this.requirements={energy:this._energySelfUpgraded},this.costs={energy:this._energySelfUpgraded}):(this.requirements={energy:this._energyNormal},this.costs={energy:this._energyNormal}),i.end();var n=[new h.Q("Slow Down",i.creature,t,"onStepIn",{requireFn:function(){return!!this.trap.hex.creature&&"A1"!=this.trap.hex.creature.type},effectFn:function(e,t){t.remainingMove--}},e)];t.createTrap("mud-bath",n,i.creature.player),e.soundsys.playSFX("sounds/mudbath"),r&&e.onCreatureMove(a,t)}}]}},68861:(e,t,i)=>{i.d(t,{Q:()=>h});var a=i(15671),r=i(43144),n=i(19755),s=i(18394),h=function(){function e(t,i,r,s,h,f){(0,a.Z)(this,e),this.id=f.effectId++,this.game=f,this.name=t,this.owner=i,this.target=r,this.trigger=s,this.creationTurn=f.turn;var u=n.extend({requireFn:function(){return!0},effectFn:function(){},alterations:{},turnLifetime:0,deleteTrigger:"onStartOfRound",stackable:!0,noLog:!1,specialHint:void 0,deleteOnOwnerDeath:!1},h);n.extend(this,u),f.effects.push(this)}return(0,r.Z)(e,[{key:"animation",value:function(){this.activate.apply(this,arguments)}},{key:"activate",value:function(e){if(!this.requireFn(e))return!1;this.noLog||console.log("Effect "+this.name+" triggered"),e instanceof s.j&&e.addEffect(this),this.effectFn(this,e)}},{key:"deleteEffect",value:function(){var e=this.target.effects.indexOf(this);this.target.effects[e]?this.target.effects.splice(e,1):console.warn("Failed to find effect on target.",this);var t=this.game.effects.indexOf(this);this.game.effects[t]?this.game.effects.splice(t,1):console.warn("Failed to find effect on game.",this),this.target.updateAlteration()}}]),e}()}}]);